FROM cypress/base:16.14.0-slim

# Create app directory
WORKDIR /usr/app/client
RUN chown -R node:node /usr/app/client

USER root
RUN apt-get update && apt-get -y install procps
# Bundle app source & Install app dependencies
COPY package*.json ./
# USER root
RUN npm install -g npm@9.2.0
USER node
RUN npm ci
COPY . .
